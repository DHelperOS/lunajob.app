<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë£¨ë‚˜ì•Œë°” ì•±ìœ¼ë¡œ ì´ë™</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #7033FF 0%, #9B6DFF 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 24px;
      padding: 40px 30px;
      text-align: center;
      max-width: 360px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .logo {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #7033FF, #9B6DFF);
      border-radius: 20px;
      margin: 0 auto 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
    }
    h1 {
      font-size: 24px;
      color: #1a1a1a;
      margin-bottom: 12px;
    }
    p {
      color: #666;
      font-size: 15px;
      line-height: 1.5;
      margin-bottom: 32px;
    }
    .btn {
      display: block;
      width: 100%;
      padding: 16px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      margin-bottom: 12px;
      transition: transform 0.2s;
    }
    .btn:active { transform: scale(0.98); }
    .btn-primary {
      background: linear-gradient(135deg, #7033FF, #9B6DFF);
      color: white;
    }
    .btn-secondary {
      background: #f5f5f5;
      color: #333;
    }
    .loading {
      color: #999;
      font-size: 14px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">ğŸŒ™</div>
    <h1>ë£¨ë‚˜ì•Œë°”</h1>
    <p>ì•±ì—ì„œ ë” í¸ë¦¬í•˜ê²Œ<br>ê³µê³ ë¥¼ í™•ì¸í•˜ì„¸ìš”!</p>

    <a href="#" id="appStoreBtn" class="btn btn-primary">App Storeì—ì„œ ë‹¤ìš´ë¡œë“œ</a>
    <a href="#" id="playStoreBtn" class="btn btn-secondary">Google Playì—ì„œ ë‹¤ìš´ë¡œë“œ</a>

    <p class="loading" id="loading">ì•±ìœ¼ë¡œ ì´ë™ ì¤‘...</p>
  </div>

  <script>
    const APP_STORE_URL = 'https://apps.apple.com/app/id6756914273';
    const PLAY_STORE_URL = 'https://play.google.com/store/apps/details?id=app.lunajob';
    const DEEP_LINK_SCHEME = 'io.supabase.lunaalba';

    // URL íŒŒë¼ë¯¸í„° íŒŒì‹±
    const params = new URLSearchParams(window.location.search);
    const type = params.get('type');
    const id = params.get('id');

    // ë”¥ë§í¬ ê²½ë¡œ ìƒì„±
    let deepLinkPath = '';
    if (type === 'post') {
      deepLinkPath = `post/${id}`;
    } else if (type === 'alba-talk') {
      deepLinkPath = `community/alba-talk/${id}`;
    } else if (type === 'second-hand') {
      deepLinkPath = `community/second-hand/${id}`;
    }

    const deepLink = `${DEEP_LINK_SCHEME}://${deepLinkPath}`;

    // OS ê°ì§€
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    const isAndroid = /Android/.test(navigator.userAgent);

    // ë²„íŠ¼ ì„¤ì •
    const appStoreBtn = document.getElementById('appStoreBtn');
    const playStoreBtn = document.getElementById('playStoreBtn');
    const loading = document.getElementById('loading');

    if (isIOS) {
      playStoreBtn.style.display = 'none';
      appStoreBtn.href = APP_STORE_URL;
    } else if (isAndroid) {
      appStoreBtn.style.display = 'none';
      playStoreBtn.href = PLAY_STORE_URL;
    } else {
      // ë°ìŠ¤í¬í†±
      appStoreBtn.href = APP_STORE_URL;
      playStoreBtn.href = PLAY_STORE_URL;
      loading.style.display = 'none';
    }

    // ëª¨ë°”ì¼ì—ì„œ ì•± ì—´ê¸° ì‹œë„
    if (isIOS || isAndroid) {
      // ë”¥ë§í¬ë¡œ ì•± ì—´ê¸° ì‹œë„
      window.location.href = deepLink;

      // 2ì´ˆ í›„ì—ë„ í˜ì´ì§€ì— ìˆìœ¼ë©´ ì•±ì´ ì—†ëŠ” ê²ƒ
      setTimeout(() => {
        loading.textContent = 'ì•±ì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤';
      }, 2000);
    }
  </script>
</body>
</html>
